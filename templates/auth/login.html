{% extends 'portions/head.html' %}

{% block title %}Connexion{% endblock %}

{% block content %}
    <!-- Bouton retour stylé -->
    <div class="absolute left-16 top-24 z-20">
        <a href="/" class="inline-flex items-center px-4 py-2 bg-white/80 backdrop-blur border border-blue-200 text-blue-700 rounded-full shadow-lg hover:bg-blue-100 hover:backdrop-blur-lg hover:scale-105 transition-all duration-200">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg>
            <span class="hidden sm:inline">Retour à l'accueil</span>
        </a>
    </div>
    <div class="pt-20"></div>
    <!-- Décor animé -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div class="absolute w-[500px] h-[500px] bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse top-[-150px] left-[-150px]"></div>
        <div class="absolute w-[400px] h-[400px] bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse bottom-[-100px] right-[-100px]"></div>
    </div>

    <!-- Contenu -->
    <main class="relative z-10 flex items-center justify-center flex-1 px-6 py-12">
        <div class="w-full max-w-md bg-white/90 backdrop-blur rounded-2xl shadow-2xl p-8">
            <!-- Titre -->
            <h1 class="text-3xl font-extrabold text-blue-800 mb-6 text-center">Connexion</h1>

            <!-- Messages flash -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="mb-4">
                        {% for category, message in messages %}
                            {% if category == 'success' %}
                                <div class="px-4 py-2 bg-green-100 text-green-700 rounded shadow mb-2">{{ message }}</div>
                            {% else %}
                                <div class="px-4 py-2 bg-red-100 text-red-700 rounded shadow mb-2">{{ message }}</div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}

            <!-- Formulaire -->
            <form method="POST" class="space-y-4">
                <div>
                    <input 
                        type="text" 
                        name="username" 
                        placeholder="Nom d'utilisateur" 
                        required
                        value="{{ username|default('') }}"
                        class="w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
                    >
                </div>
                <div>
                    <input 
                        type="password" 
                        name="password" 
                        placeholder="Mot de passe" 
                        required
                        value="{{ password|default('') }}"
                        class="w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
                    >
                </div>

                <button 
                    type="submit" 
                    class="w-full py-3 px-6 rounded-xl bg-blue-600 text-white font-semibold shadow-md hover:bg-blue-700 hover:shadow-lg transform hover:scale-[1.02] transition"
                >
                    Se connecter
                </button>
            </form>

            <!-- Lien vers inscription -->
            <p class="mt-6 text-sm text-gray-600 text-center">
                Pas encore de compte ?
                <a href="/register" class="font-semibold text-blue-600 hover:underline">Inscrivez-vous</a>
            </p>
        </div>
    </main>

{% endblock %}
